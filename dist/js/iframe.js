if("undefined"!=typeof io){io.connect(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`).on("fileChanged",e=>{setTimeout(()=>{e?parent.window.location.reload():window.location.reload()},500)})}function e(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}function t(e){const t=Array.from(e.querySelectorAll(".RoundupResults-summary"));t.forEach(e=>{e.addEventListener("click",e=>{t.forEach(t=>{const n=t.closest("details");e.target.closest("details")!==n&&n.open&&t.click()})})})}addEventListener("DOMContentLoaded",()=>{const n=parent.document.querySelector(".Roundup-tests");n&&(document.getElementById("RoundupComponent")?(validations.accessibility&&function(){const n=["passes","inapplicable","violations","incomplete"],s=parent.document.querySelector(".RoundupTest--a11y");t(s),axe.run(document.getElementById("RoundupComponent"),function(t,o){if(t)throw t;n.forEach(t=>{const n=s.querySelector(`.RoundupResults--${t} .RoundupResults-value`);let l="";n.innerText=o[t].length,"violations"!==t&&"incomplete"!==t||n.classList.toggle("has-positiveValue",o[t].length),o[t].length?(l+="<ul>",o[t].forEach(t=>{if(l+='<li class="RoundupResult">',l+='<dl class="RoundupResult-data">',t.description&&(l+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Description</dt> <dd class="RoundupResult-value">${e(t.description)}</div></dd>`),t.help&&(l+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Help</dt> <dd class="RoundupResult-value">${e(t.help)}</div></dd>`),t.helpUrl&&(l+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Link</dt> <dd class="RoundupResult-value"><a href="${t.helpUrl}" target="_blank">${t.helpUrl}</div></dd></a>`),t.impact){let e="";switch(t.impact){case"serious":e="RoundupResults-value--negative";break;case"moderate":e="RoundupResults-value--warning"}l+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Impact</dt> <dd class="${e}">${t.impact}</div></dd>`}l+="</dl>",l+="</li>"}),l+="</ul>"):l+='<p><i class="RoundupResults-empty">Nothing to report.</i></p>',s.querySelector(`.RoundupResults--${t} .RoundupResults-details`).innerHTML=l}),s.removeAttribute("hidden")})}(),validations.html&&function(){const n=parent.document.querySelector(".RoundupTest--html"),s=["error","warning"];t(n),fetch(location.href).then(t=>{t.ok&&t.text().then(t=>{const o=new FormData;o.append("out","json"),o.append("content",t),fetch("https://validator.w3.org/nu/",{method:"post",headers:{Accept:"application/json"},body:o}).then(function(t){t.ok?t.json().then(t=>{s.forEach(s=>{const o=t.messages.filter(e=>e.type===s),l=n.querySelector(`.RoundupResults--${s} .RoundupResults-value`);let u="";l.innerText=o.length,o.length?(l.classList.add("has-positiveValue"),u+="<ul>",o.forEach(t=>{if(u+='<li class="RoundupResult">',u+='<dl class="RoundupResult-data">',t.message&&(u+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Message</dt> <dd class="RoundupResult-value">${t.message}</div></dd>`),t.extract){const n=`${e(t.extract.slice(0,t.hiliteStart))}<mark>${e(t.extract.slice(t.hiliteStart,t.hiliteStart+t.hiliteLength))}</mark>${e(t.extract.slice(t.hiliteStart+t.hiliteLength))}`;u+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">Extract</dt> <dd class="RoundupResult-value"><code class="RoundupResult-extract">${n.replace(/\n/g,"â†©")}</code></div></dd>`}u+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">From</dt><dd class="RoundupResult-value">Line: ${t[t.firstLine?"firstLine":"lastLine"]}, Column: ${t.firstColumn}</div></dd>`,u+=`<div class="RoundupResult-wrapper"><dt class="RoundupResult-attr">To</dt><dd class="RoundupResult-value">Line: ${t.lastLine}, Column: ${t.lastColumn}</div></dd>`,u+="</dl>",u+="</li>"}),u+="</ul>"):(l.classList.remove("has-positiveValue"),u+='<p><i class="RoundupResults-empty">Nothing to report.</i></p>'),n.querySelector(`.RoundupResults--${s} .RoundupResults-details`).innerHTML=u}),n.removeAttribute("hidden")}):console.warn("HTML validation failed. Most likely something went wrong with https://validator.w3.org/nu/. Maybe you also ran into rate limiting.")})})})}(),n.removeAttribute("hidden")):n.setAttribute("hidden",!0))}),document.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll(".RoundupComponent-file")).forEach(e=>{e.addEventListener("click",e=>{parent.window&&parent.window.onPageChanged&&parent.window.onPageChanged(encodeURI(e.target.getAttribute("href")))})})});
